<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="apple-touch-icon" href="favicon.ico" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="../src/Addons/Library/VariaMosStyle/variamos.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"
    />

    <title>VariaMos PLE</title>
  </head>
  <body>
    <div id="root"></div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
      crossorigin="anonymous"
    ></script>

    <script>
      $(document).ready(function () {
        // START ********** TOGGLE TREE
        document.getElementById("projectManagement").click();

        var toggler = document.getElementsByClassName("fa-plus-square");
        var i;

        for (i = 0; i < toggler.length; i++) {
          toggler[i].addEventListener("click", function () {
            this.parentElement
              .querySelector(".nested")
              .classList.toggle("active");
            this.classList.toggle("fa-minus-square-o");
          });
        }
        // END ********** TOGGLE TREE

        // START ********** SPLIT EDITOR SPACE
        document
          .getElementById("hiddenProject")
          .addEventListener("click", function () {
            if (this.classList.contains("fa-arrow-circle-o-left")) {
              this.classList.remove("fa-arrow-circle-o-left");
              this.classList.add("fa-arrow-circle-o-right");
              document
                .getElementById("TreePannel")
                .setAttribute("hidden", "hidden");
            } else {
              this.classList.remove("fa-arrow-circle-o-right");
              this.classList.add("fa-arrow-circle-o-left");
              document.getElementById("TreePannel").removeAttribute("hidden");
            }
          });
        // END  ********** SPLIT EDITOR SPACE

        //START ***************** Code for Right Clic
        const findTypeSelect = (term, targeSelect) => {
          if (targeSelect.includes(term)) {
            return targeSelect;
          }
        };

        $("#TreePannel")
          .on("contextmenu", function (e) {
            var top = e.pageY - 10;
            var left = e.pageX + 30;
            $("#context-menu")
              .css({
                display: "block",
                top: top,
                left: left,
              })
              .addClass("show");

            const targeSelect = e.target.classList.toString();

            $("#newModel").removeAttr("hidden");
            $("#newApplication").removeAttr("hidden");
            $("#newAdaptation").removeAttr("hidden");
            $("#newProducLine").removeAttr("hidden");
            $("#context-menu").removeAttr("hidden");

            switch (targeSelect) {
              case findTypeSelect("lps", targeSelect):
                $("#newModel").attr("hidden", "hidden");
                $("#newApplication").attr("hidden", "hidden");
                $("#newAdaptation").attr("hidden", "hidden");

                break;
              case findTypeSelect("domainE", targeSelect):
                $("#newApplication").attr("hidden", "hidden");
                $("#newAdaptation").attr("hidden", "hidden");
                $("#newProducLine").attr("hidden", "hidden");

                break;
              case findTypeSelect("appE", targeSelect):
                $("#newAdaptation").attr("hidden", "hidden");
                $("#newProducLine").attr("hidden", "hidden");
                break;
              case findTypeSelect("aeApp", targeSelect):
                $("#newApplication").attr("hidden", "hidden");
                $("#newProducLine").attr("hidden", "hidden");
                break;
              case findTypeSelect("aeContext", targeSelect):
                $("#newApplication").attr("hidden", "hidden");
                $("#newAdaptation").attr("hidden", "hidden");
                $("#newProducLine").attr("hidden", "hidden");
                break;
              default:
                $("#context-menu").attr("hidden", "hidden");
                break;
            }

            return false; //blocks default Webbrowser right click menu
          })
          .on("click", function () {
            $("#context-menu").removeClass("show").hide();
          });

        // $("#context-menu a").on("click", function () {
        //   $(this).parent().removeClass("show").hide();
        // });
        //End***************** Code for Right Clic
      });
    </script>
  </body>
</html>
